# Component Documentation

This document provides a comprehensive overview of all components in the application, their purposes, and their dependencies.

## Table of Contents
- [Architecture Overview](#architecture-overview)
- [Component Dependency Tree](#component-dependency-tree)
- [Component Reference](#component-reference)
  - [Root Components](#root-components)
  - [Assistant UI Components](#assistant-ui-components)
  - [UI Components](#ui-components)
  - [Library & Utilities](#library--utilities)

---

## Architecture Overview

The application is structured in distinct layers:

1. **Context & Provider Layer** - Runtime and state management
2. **Layout Layer** - Major structural components
3. **Feature Layer** - Domain-specific components (chat, threads, etc.)
4. **Primitive Layer** - Reusable UI building blocks
5. **External Dependencies** - Third-party libraries

---

## Visual Layout

### Main Application Structure (AomiFrame)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AomiFrame (width: 100%, height: 80vh)                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ MyRuntimeProvider (Backend: NEXT_PUBLIC_BACKEND_URL)                   â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ SidebarProvider (State: expanded/collapsed, Mobile detection)      â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ Container (rounded-2xl, border, shadow)                        â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                                                                â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ ThreadListSidebarâ”‚ SidebarInset                         â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ (16rem width)    â”‚ (Main Content Area)                  â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚                  â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚SidebarHeader â”‚ â”‚ â”‚ Header (h-16, border-b)           â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚assistant-ui  â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚   logo       â”‚ â”‚ â”‚ â”‚ â˜°  â”‚ | â”‚ Breadcrumb           â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚Trigâ”‚Sepâ”‚ (TODO: Chat Summary) â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚                  â”‚ â”‚ â””â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚SidebarContentâ”‚ â”‚ â”‚ Thread (flex-1, overflow-hidden)  â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚                                   â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ ThreadList   â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ ThreadPrimitive.Viewport      â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚+ New     â”‚ â”‚ â”‚ â”‚ â”‚ (scrollable message area)     â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚  Thread  â”‚ â”‚ â”‚ â”‚ â”‚                               â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚Thread 1  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ ThreadWelcome (if empty)â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â”‚ â”‚  - Greeting             â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚Thread 2  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚  - Suggestions (4 cards)â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚(active)  â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚ â”‚                               â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚Thread 3  â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â”‚       ğŸ—„ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ UserMessage             â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚  [Attachments] [Text]   â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚  [BranchPicker] [Editâœ] â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚                               â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚ AssistantMessage        â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚  [MarkdownText]         â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚  [ToolFallback (if any)]â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚  [Branch] [CopyğŸ“‹][â†»]   â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚                               â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚ Composer (sticky bottom)â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚ [Attachments preview]   â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚ [Input: "Send a msg..."]â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â”‚ [+ Attach] [Send â†‘]     â”‚   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â”‚                                   â”‚ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚              â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚                  â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚SidebarFooter â”‚ â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚   GitHub     â”‚ â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚  View Source â”‚ â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚                  â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ [SidebarRail]    â”‚                                       â”‚  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                                                                â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile Layout (Sidebar as Sheet)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SidebarInset (full width)        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Header                       â”‚ â”‚
â”‚ â”‚ [â˜°] | Breadcrumb             â”‚ â”‚  â† SidebarTrigger opens Sheet
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ Thread (full width)          â”‚ â”‚
â”‚ â”‚   Messages...                â”‚ â”‚
â”‚ â”‚   Composer                   â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When Sheet is opened:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â”‚                      â”‚
â”‚ â–“ Sheet â–“ â”‚  Backdrop Overlay    â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â”‚  (darkened)          â”‚
â”‚ â–“Header â–“ â”‚                      â”‚
â”‚ â–“Contentâ–“ â”‚                      â”‚
â”‚ â–“ List  â–“ â”‚                      â”‚
â”‚ â–“Footer â–“ â”‚                      â”‚
â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Dependency Tree

```
AomiFrame (components/aomi-frame.tsx:30)
â”œâ”€ MyRuntimeProvider (components/assistant-ui/runtime.tsx:41)
â”‚  â”œâ”€ BackendApi (lib/backend-api.ts:35)
â”‚  â””â”€ @assistant-ui/react
â”‚     â””â”€ AssistantRuntimeProvider
â”‚
â”œâ”€ SidebarProvider (components/ui/sidebar.tsx:56)
â”‚  â”œâ”€ TooltipProvider (components/ui/tooltip.tsx:8)
â”‚  â””â”€ useIsMobile hook
â”‚
â”œâ”€ ThreadListSidebar (components/assistant-ui/threadlist-sidebar.tsx:16)
â”‚  â”œâ”€ Sidebar (components/ui/sidebar.tsx:154)
â”‚  â”‚  â”œâ”€ Sheet (components/ui/sheet.tsx:9)
â”‚  â”‚  â”‚  â””â”€ @radix-ui/react-dialog
â”‚  â”‚  â””â”€ SheetContent
â”‚  â”‚
â”‚  â”œâ”€ SidebarHeader (components/ui/sidebar.tsx:336)
â”‚  â”œâ”€ SidebarContent (components/ui/sidebar.tsx:372)
â”‚  â”œâ”€ SidebarFooter (components/ui/sidebar.tsx:347)
â”‚  â”œâ”€ SidebarMenu (components/ui/sidebar.tsx:455)
â”‚  â”œâ”€ SidebarMenuItem (components/ui/sidebar.tsx:466)
â”‚  â”œâ”€ SidebarMenuButton (components/ui/sidebar.tsx:499)
â”‚  â”œâ”€ SidebarRail (components/ui/sidebar.tsx:282)
â”‚  â”‚
â”‚  â””â”€ ThreadList (components/assistant-ui/thread-list.tsx:13)
â”‚     â”œâ”€ Button (components/ui/button.tsx:38)
â”‚     â”‚  â””â”€ @radix-ui/react-slot
â”‚     â”œâ”€ TooltipIconButton (components/assistant-ui/tooltip-icon-button.tsx:19)
â”‚     â”‚  â”œâ”€ Tooltip (components/ui/tooltip.tsx:21)
â”‚     â”‚  â”‚  â””â”€ @radix-ui/react-tooltip
â”‚     â”‚  â””â”€ Button
â”‚     â”œâ”€ Skeleton (components/ui/skeleton.tsx:3)
â”‚     â””â”€ @assistant-ui/react
â”‚        â”œâ”€ ThreadListPrimitive
â”‚        â””â”€ ThreadListItemPrimitive
â”‚
â”œâ”€ SidebarInset (components/ui/sidebar.tsx:307)
â”‚  â”œâ”€ SidebarTrigger (components/ui/sidebar.tsx:256)
â”‚  â”‚  â””â”€ Button
â”‚  â”‚
â”‚  â”œâ”€ Separator (components/ui/separator.tsx:8)
â”‚  â”‚  â””â”€ @radix-ui/react-separator
â”‚  â”‚
â”‚  â”œâ”€ Breadcrumb Components (components/ui/breadcrumb.tsx)
â”‚  â”‚  â”œâ”€ Breadcrumb (line 7)
â”‚  â”‚  â”œâ”€ BreadcrumbList (line 11)
â”‚  â”‚  â”œâ”€ BreadcrumbItem (line 24)
â”‚  â”‚  â”œâ”€ BreadcrumbLink (line 34)
â”‚  â”‚  â”œâ”€ BreadcrumbPage (line 52)
â”‚  â”‚  â””â”€ BreadcrumbSeparator (line 65)
â”‚  â”‚
â”‚  â””â”€ Thread (components/assistant-ui/thread.tsx:38)
â”‚     â”œâ”€ Button
â”‚     â”‚
â”‚     â”œâ”€ MarkdownText (components/assistant-ui/markdown-text.tsx:28)
â”‚     â”‚  â”œâ”€ @assistant-ui/react-markdown
â”‚     â”‚  â”‚  â””â”€ MarkdownTextPrimitive
â”‚     â”‚  â”œâ”€ TooltipIconButton
â”‚     â”‚  â””â”€ remark-gfm
â”‚     â”‚
â”‚     â”œâ”€ ToolFallback (components/assistant-ui/tool-fallback.tsx:6)
â”‚     â”‚  â””â”€ Button
â”‚     â”‚
â”‚     â”œâ”€ TooltipIconButton
â”‚     â”‚
â”‚     â”œâ”€ Attachment Components (components/assistant-ui/attachment.tsx)
â”‚     â”‚  â”œâ”€ ComposerAddAttachment (line 220)
â”‚     â”‚  â”œâ”€ ComposerAttachments (line 210)
â”‚     â”‚  â””â”€ UserMessageAttachments (line 202)
â”‚     â”‚     â”œâ”€ Tooltip
â”‚     â”‚     â”œâ”€ Dialog (components/ui/dialog.tsx:9)
â”‚     â”‚     â”‚  â””â”€ @radix-ui/react-dialog
â”‚     â”‚     â”œâ”€ Avatar (components/ui/avatar.tsx:8)
â”‚     â”‚     â”‚  â””â”€ @radix-ui/react-avatar
â”‚     â”‚     â”œâ”€ TooltipIconButton
â”‚     â”‚     â””â”€ Next.js Image
â”‚     â”‚
â”‚     â”œâ”€ @assistant-ui/react primitives
â”‚     â”‚  â”œâ”€ ThreadPrimitive
â”‚     â”‚  â”œâ”€ MessagePrimitive
â”‚     â”‚  â”œâ”€ ComposerPrimitive
â”‚     â”‚  â”œâ”€ ActionBarPrimitive
â”‚     â”‚  â”œâ”€ BranchPickerPrimitive
â”‚     â”‚  â””â”€ ErrorPrimitive
â”‚     â”‚
â”‚     â””â”€ motion/react
â”‚        â”œâ”€ LazyMotion
â”‚        â””â”€ MotionConfig
â”‚
â””â”€ Utilities
   â””â”€ cn (lib/utils)
```

---

## Component Reference

### Root Components

#### **AomiFrame**
**Location:** `components/aomi-frame.tsx:30`

**Purpose:** The main application frame component that encapsulates the entire chat interface. It provides a configurable container with customizable width, height, and styling.

**Responsibilities:**
- Sets up the runtime provider with backend URL and session ID
- Configures the sidebar layout with collapsible behavior
- Renders the main chat interface with thread list and conversation area
- Applies theming and styling (rounded borders, shadows, dark mode support)

**Props:**
- `width` - Container width (default: "100%")
- `height` - Container height (default: "80vh")
- `className` - Additional CSS classes
- `style` - Custom CSS properties

**Key Features:**
- Uses environment variable `NEXT_PUBLIC_BACKEND_URL` for backend configuration
- Fixed session ID: "default-session"
- Collapsible sidebar with "offcanvas" mode

---

### Assistant UI Components

#### **MyRuntimeProvider**
**Location:** `components/assistant-ui/runtime.tsx:41`

**Purpose:** Manages the runtime state for the assistant UI, handling message persistence, streaming, and backend communication.

**Responsibilities:**
- Maintains message state and synchronization with backend
- Polls backend for updates every 500ms when processing
- Converts backend message format to assistant-ui format
- Handles message sending and cancellation
- Manages loading and error states

**Props:**
- `children` - React children to wrap
- `backendUrl` - Backend API URL (default: "http://localhost:8080")
- `sessionId` - Session identifier (default: "default-session")

**Key Features:**
- Automatic polling during message processing
- Message format conversion (backend â†” assistant-ui)
- Error handling with user-visible error messages
- Support for tool streaming display

---

#### **Thread**
**Location:** `components/assistant-ui/thread.tsx:38`

**Purpose:** The main conversation thread component displaying messages, composer, and welcome screen.

**Responsibilities:**
- Renders message list (user and assistant messages)
- Displays welcome screen when thread is empty
- Manages message composition and editing
- Handles scroll-to-bottom functionality
- Provides suggested prompts for new conversations

**Sub-components:**
- `ThreadWelcome` - Welcome screen with greeting and suggestions
- `ThreadSuggestions` - Clickable prompt suggestions
- `ThreadScrollToBottom` - Scroll-to-bottom button
- `Composer` - Message input area
- `UserMessage` - User message bubble
- `AssistantMessage` - Assistant response bubble
- `EditComposer` - Message edit interface
- `BranchPicker` - Navigate between message branches

**Key Features:**
- Animation support via motion/react
- Markdown rendering for assistant messages
- Tool call visualization
- Message attachments support
- Branch navigation for multiple responses

**Visual Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Thread (LazyMotion + MotionConfig wrapper)          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ThreadPrimitive.Root (@container, flex h-full)  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ThreadPrimitive.Viewport (scrollable)       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [IF EMPTY]                                  â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadWelcome                           â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ "Hello there!"                     â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ "How can I help you today?"        â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ ThreadSuggestions (grid 2 cols)    â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚Suggestion 1â”‚Suggestion 2 â”‚       â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â”‚Suggestion 3â”‚Suggestion 4 â”‚       â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [IF HAS MESSAGES]                           â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadPrimitive.Messages                â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                                         â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ UserMessage (grid layout)           â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ UserMessageAttachments (row 1)  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ [ğŸ“ image.png] [ğŸ“ doc.pdf]     â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ Message Content (row 2, col 2)  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ "User's message text..."    â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ [UserActionBar: âœ Edit]         â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ [BranchPicker: â—„ 1/2 â–º] (row 3)    â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                                         â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ AssistantMessage                    â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ MessagePrimitive.Parts          â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ MarkdownText                â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ - Formatted response        â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ - **Bold**, *italic*        â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ - Code blocks               â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ ToolFallback (if tool used) â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ âœ“ Used tool: weatherAPI     â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ [Expand âŒ„]                  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ [BranchPicker] [AssistantActionBar]â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ [â—„ 1/1 â–º]      [ğŸ“‹ Copy] [â†» Reload]â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚                                         â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ [OR EditComposer if editing]            â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ EditComposer                        â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ [Textarea: editing message...]  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ [Cancel] [Update]                   â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ <spacer grows to push composer down>        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                                             â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ Composer (sticky bottom, max-w-44rem)   â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ ThreadScrollToBottom (absolute)     â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚      [â†“ Scroll to bottom]           â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ ComposerPrimitive.Root              â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ ComposerAttachments             â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ [ğŸ“][ğŸ“][ğŸ“]                    â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ ComposerPrimitive.Input         â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ "Send a message..."             â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ ComposerAction                  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ [+ Add Attachment]      [Send â†‘]â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚     or [â¬› Cancel] if running    â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### **ThreadList**
**Location:** `components/assistant-ui/thread-list.tsx:13`

**Purpose:** Displays a list of conversation threads with create, select, and archive functionality.

**Responsibilities:**
- Renders list of available threads
- Provides "New Thread" creation button
- Shows loading skeletons while threads load
- Enables thread selection and archiving
- Displays thread titles with fallback

**Sub-components:**
- `ThreadListNew` - New thread button
- `ThreadListItems` - Thread list container
- `ThreadListItem` - Individual thread item
- `ThreadListSkeleton` - Loading placeholder

**Key Features:**
- Active thread highlighting
- Archive functionality
- Loading states with skeletons
- Automatic title generation with fallback

**Visual Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThreadList                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ThreadListPrimitive.Root         â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ThreadListNew                â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [+ New Thread]               â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ ThreadListItems              â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                              â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [IF LOADING]                 â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadListSkeleton       â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“             â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“              â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“            â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–“                â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“             â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                              â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ [IF LOADED]                  â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadListItem           â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ "What's the weather...ğŸ—„"â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadListItem           â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ "Explain React hooks...ğŸ—„"â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadListItem (active)  â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ "Current conversation ğŸ—„"â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ ThreadListItem           â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ "New Chat          ğŸ—„"   â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Each ThreadListItem:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThreadListItemPrimitive.Root           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ThreadListItemTrigger  â”‚  Archive  â”‚ â”‚
â”‚ â”‚ "Thread title..."      â”‚    ğŸ—„     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### **ThreadListSidebar**
**Location:** `components/assistant-ui/threadlist-sidebar.tsx:16`

**Purpose:** Complete sidebar component containing branding, thread list, and footer links.

**Responsibilities:**
- Displays application header with branding
- Contains the thread list
- Provides footer with external links (GitHub)
- Manages sidebar collapsible behavior

**Configuration:**
- `collapsible="offcanvas"` - Sidebar slides out completely when collapsed
- `variant="inset"` - Inset styling variant
- Border styling with sidebar-border color

**Sections:**
- Header: assistant-ui branding link
- Content: ThreadList component
- Footer: GitHub repository link
- Rail: Draggable resize handle

**Visual Layout:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ThreadListSidebar              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Sidebar                    â”‚ â”‚
â”‚ â”‚  (collapsible="offcanvas") â”‚ â”‚
â”‚ â”‚  (variant="inset")         â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ SidebarHeader          â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ SidebarMenu        â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ SidebarMenuItemâ”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ğŸ’¬ assistantâ”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚   -ui      â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ SidebarContent         â”‚ â”‚ â”‚
â”‚ â”‚ â”‚  (scrollable)          â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                        â”‚ â”‚ â”‚
â”‚ â”‚ â”‚  [ThreadList]          â”‚ â”‚ â”‚
â”‚ â”‚ â”‚  (See ThreadList       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚   visual layout above) â”‚ â”‚ â”‚
â”‚ â”‚ â”‚                        â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ SidebarFooter          â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ SidebarMenu        â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ SidebarMenuItemâ”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ğŸ™ GitHub   â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ View Sourceâ”‚ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚                            â”‚ â”‚
â”‚ â”‚ [SidebarRail]              â”‚ â”‚
â”‚ â”‚  (hover resize handle)     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### **MarkdownText**
**Location:** `components/assistant-ui/markdown-text.tsx:28`

**Purpose:** Renders markdown content with syntax highlighting and custom styling.

**Responsibilities:**
- Parses and renders markdown text
- Provides code block syntax highlighting
- Adds copy-to-clipboard functionality for code
- Supports GitHub Flavored Markdown (GFM)
- Applies custom styling to markdown elements

**Supported Elements:**
- Headers (h1-h6)
- Paragraphs, lists (ordered/unordered)
- Tables with styling
- Code blocks with language detection
- Links, blockquotes
- Inline code

**Key Features:**
- Code header with language label and copy button
- Custom table styling with rounded corners
- Responsive text sizing
- Dark mode support
- Copy confirmation with icon change

---

#### **ToolFallback**
**Location:** `components/assistant-ui/tool-fallback.tsx:6`

**Purpose:** Displays tool call information when a tool is invoked by the assistant.

**Responsibilities:**
- Shows tool name and execution status
- Displays tool arguments in collapsible section
- Shows tool result when available
- Provides expand/collapse functionality

**Display:**
- Tool name with checkmark icon
- Collapsible args and result sections
- JSON formatting for complex data
- Border and spacing for visual separation

---

#### **TooltipIconButton**
**Location:** `components/assistant-ui/tooltip-icon-button.tsx:19`

**Purpose:** Reusable icon button component with integrated tooltip.

**Responsibilities:**
- Wraps Button component with Tooltip
- Provides consistent icon button styling
- Shows descriptive tooltip on hover
- Ensures accessibility with sr-only text

**Props:**
- `tooltip` - Tooltip text
- `side` - Tooltip position (default: "bottom")
- All Button props

**Usage:** Used throughout the app for action buttons (copy, refresh, edit, archive, etc.)

---

#### **Attachment Components**
**Location:** `components/assistant-ui/attachment.tsx`

**Purpose:** Handle file and image attachments in messages and composer.

**Components:**

**`ComposerAddAttachment`** (line 220)
- Add button to attach files to messages
- Opens file picker dialog

**`ComposerAttachments`** (line 210)
- Displays attached files in composer
- Horizontal scrollable list
- Shows thumbnails for images

**`UserMessageAttachments`** (line 202)
- Displays attachments in sent user messages
- Positioned at message end

**`AttachmentUI`**
- Individual attachment tile with preview
- Click to view full-size in dialog
- Remove button for composer attachments
- Image thumbnails with fallback icons

**Key Features:**
- Image preview with dialog
- File type icons for non-images
- Drag-and-drop support (via primitives)
- Thumbnail generation
- Remove functionality

---

### UI Components

#### **Sidebar**
**Location:** `components/ui/sidebar.tsx:154`

**Purpose:** Collapsible sidebar container with mobile responsiveness.

**Responsibilities:**
- Provides collapsible sidebar layout
- Handles mobile sheet behavior
- Manages expanded/collapsed states
- Keyboard shortcut support (Cmd/Ctrl+B)
- Cookie-based state persistence

**Variants:**
- `sidebar` - Standard sidebar
- `floating` - Floating sidebar with shadow
- `inset` - Inset sidebar with padding

**Collapsible Modes:**
- `offcanvas` - Slides completely off screen
- `icon` - Collapses to icon-only view
- `none` - Always visible

**Key Features:**
- Mobile: Renders as Sheet dialog
- Desktop: Fixed position sidebar
- State persistence via cookies
- Keyboard shortcuts
- Responsive width adjustments

---

#### **SidebarProvider**
**Location:** `components/ui/sidebar.tsx:56`

**Purpose:** Context provider for sidebar state management.

**Responsibilities:**
- Manages sidebar open/closed state
- Detects mobile vs desktop viewport
- Provides sidebar context to children
- Handles state synchronization

**Context Values:**
- `state` - "expanded" | "collapsed"
- `open` - Desktop sidebar state
- `openMobile` - Mobile sidebar state
- `isMobile` - Mobile detection
- `toggleSidebar` - Toggle function

---

#### **Sidebar Sub-components**

**`SidebarHeader`** (line 336)
- Top section of sidebar
- Typically contains branding/logo

**`SidebarContent`** (line 372)
- Main scrollable content area
- Contains primary sidebar content

**`SidebarFooter`** (line 347)
- Bottom section of sidebar
- Typically contains settings/links

**`SidebarMenu`** (line 455)
- Menu container for navigation items

**`SidebarMenuItem`** (line 466)
- Individual menu item wrapper

**`SidebarMenuButton`** (line 499)
- Clickable menu button with variants
- Supports tooltips when collapsed
- Active state styling

**`SidebarTrigger`** (line 256)
- Button to toggle sidebar visibility
- Shows hamburger/panel icon

**`SidebarInset`** (line 307)
- Main content area beside sidebar
- Adjusts margins based on sidebar state

**`SidebarRail`** (line 282)
- Draggable resize handle
- Appears on hover

---

#### **Button**
**Location:** `components/ui/button.tsx:38`

**Purpose:** Versatile button component with multiple variants and sizes.

**Variants:**
- `default` - Primary button with solid background
- `destructive` - Danger/delete actions (red)
- `outline` - Bordered button with transparent background
- `secondary` - Secondary actions
- `ghost` - Minimal styling, hover effect only
- `link` - Text link styling with underline

**Sizes:**
- `default` - Standard height (h-9)
- `sm` - Small button (h-8)
- `lg` - Large button (h-10)
- `icon` - Square icon button (size-9)

**Features:**
- Focus ring for accessibility
- Disabled state styling
- Icon support with proper sizing
- `asChild` prop for composition

---

#### **Separator**
**Location:** `components/ui/separator.tsx:8`

**Purpose:** Visual divider between content sections.

**Orientations:**
- `horizontal` - Full-width horizontal line
- `vertical` - Full-height vertical line

**Props:**
- `decorative` - Whether separator is purely visual (default: true)

---

#### **Breadcrumb Components**
**Location:** `components/ui/breadcrumb.tsx`

**Purpose:** Navigation breadcrumb trail showing current location.

**Components:**

**`Breadcrumb`** (line 7)
- Root nav element with aria-label

**`BreadcrumbList`** (line 11)
- Ordered list container for items

**`BreadcrumbItem`** (line 24)
- Individual breadcrumb item

**`BreadcrumbLink`** (line 34)
- Clickable breadcrumb link
- Hover effects

**`BreadcrumbPage`** (line 52)
- Current page (non-clickable)
- Distinct styling

**`BreadcrumbSeparator`** (line 65)
- Separator between items (chevron icon)

**`BreadcrumbEllipsis`** (line 83)
- Collapsed items indicator

---

#### **Tooltip**
**Location:** `components/ui/tooltip.tsx:21`

**Purpose:** Displays contextual information on hover.

**Components:**

**`TooltipProvider`** (line 8)
- Context provider for tooltip configuration
- Sets delay duration

**`Tooltip`** (line 21)
- Root tooltip component
- Auto-includes provider

**`TooltipTrigger`** (line 31)
- Element that triggers tooltip on hover

**`TooltipContent`** (line 37)
- Tooltip content bubble
- Arrow pointing to trigger
- Portal rendering for z-index

**Features:**
- Configurable delay
- Arrow pointer
- Animation (fade + zoom)
- Side positioning
- Portal rendering

---

#### **Sheet**
**Location:** `components/ui/sheet.tsx:9`

**Purpose:** Slide-out panel for mobile/overlay content (used for mobile sidebar).

**Components:**

**`Sheet`** (line 9)
- Root dialog component

**`SheetTrigger`** (line 13)
- Button to open sheet

**`SheetContent`** (line 47)
- Sliding panel content
- Configurable side (top/right/bottom/left)

**`SheetOverlay`** (line 31)
- Dark backdrop overlay

**Sides:**
- `right` - Slides from right (default)
- `left` - Slides from left
- `top` - Slides from top
- `bottom` - Slides from bottom

**Features:**
- Backdrop overlay
- Slide animations
- Close button
- Mobile-optimized
- Keyboard accessible

---

#### **Dialog**
**Location:** `components/ui/dialog.tsx:9`

**Purpose:** Modal dialog for focused content/interactions.

**Components:**

**`Dialog`** (line 9)
- Root dialog component

**`DialogTrigger`** (line 15)
- Button to open dialog

**`DialogContent`** (line 49)
- Dialog content container
- Centered on screen

**`DialogHeader`** (line 83)
- Header section for title/description

**`DialogFooter`** (line 93)
- Footer section for actions

**`DialogTitle`** (line 106)
- Accessible dialog title

**`DialogDescription`** (line 119)
- Dialog description text

**Features:**
- Center positioning
- Backdrop overlay
- Close button (optional)
- Fade + zoom animations
- Keyboard handling (Escape to close)
- Focus trap

**Usage:** Used for attachment previews in full-size view

---

#### **Avatar**
**Location:** `components/ui/avatar.tsx:8`

**Purpose:** Displays user/entity avatar images with fallback.

**Components:**

**`Avatar`** (line 8)
- Root avatar container
- Circular by default

**`AvatarImage`** (line 24)
- Actual image element
- Auto aspect-ratio

**`AvatarFallback`** (line 37)
- Fallback content when image fails
- Typically shows initials or icon

**Features:**
- Automatic fallback
- Configurable delay for fallback
- Circular masking
- Responsive sizing

**Usage:** Used in attachment thumbnails for file previews

---

#### **Skeleton**
**Location:** `components/ui/skeleton.tsx:3`

**Purpose:** Loading placeholder with pulse animation.

**Features:**
- Pulse animation
- Matches content shape
- Muted background color

**Usage:** Thread list loading states, attachment loading

---

### Library & Utilities

#### **BackendApi**
**Location:** `lib/backend-api.ts:35`

**Purpose:** API client for backend communication.

**Methods:**

**`fetchState(sessionId: string)`**
- GET `/api/state?session_id={sessionId}`
- Polls for current session state
- Returns messages and processing status

**`postChatMessage(sessionId: string, message: string)`**
- POST `/api/chat`
- Sends user message to backend
- Triggers assistant processing

**`postSystemMessage(sessionId: string, message: string)`**
- POST `/api/system`
- Sends system-level message

**`postInterrupt(sessionId: string)`**
- POST `/api/interrupt`
- Cancels ongoing assistant processing

**Response Format:**
```typescript
{
  messages?: SessionMessagePayload[]
  is_processing?: boolean
  pending_wallet_tx?: string | null
}
```

**Message Format:**
```typescript
{
  sender?: string
  content?: string
  timestamp?: string
  is_streaming?: boolean
  tool_stream?: [string, string] | object | null
}
```

---

#### **cn utility**
**Location:** `lib/utils`

**Purpose:** Class name utility for conditional CSS classes.

**Usage:**
```typescript
cn("base-class", condition && "conditional-class", className)
```

Typically a wrapper around `clsx` or similar utility for merging Tailwind classes.

---

## External Dependencies

### @assistant-ui/react
Provides core primitives for building assistant/chat interfaces:
- `ThreadPrimitive` - Thread container and viewport
- `MessagePrimitive` - Message rendering
- `ComposerPrimitive` - Message input
- `ActionBarPrimitive` - Message actions (copy, reload, edit)
- `BranchPickerPrimitive` - Branch navigation
- `ErrorPrimitive` - Error display
- `AttachmentPrimitive` - File attachments
- `useExternalStoreRuntime` - Runtime creation
- `AssistantRuntimeProvider` - Runtime context

### @assistant-ui/react-markdown
- `MarkdownTextPrimitive` - Markdown rendering
- `useIsMarkdownCodeBlock` - Code block detection

### @radix-ui
Unstyled, accessible UI primitives:
- `@radix-ui/react-slot` - Component composition
- `@radix-ui/react-tooltip` - Tooltip primitives
- `@radix-ui/react-dialog` - Dialog/Sheet primitives
- `@radix-ui/react-separator` - Separator primitive
- `@radix-ui/react-avatar` - Avatar primitives

### motion/react
Animation library (Framer Motion):
- `LazyMotion` - Lazy-loaded animation features
- `MotionConfig` - Animation configuration
- `m.*` - Motion components for animations

### lucide-react
Icon library providing all icons used in the app

### remark-gfm
GitHub Flavored Markdown plugin for markdown parsing

### next/image
Next.js optimized image component

---

## Design Patterns

### Composition Pattern
Components use the `asChild` prop pattern from Radix UI for composition:
```tsx
<Button asChild>
  <Link href="...">Click me</Link>
</Button>
```

### Primitive + Custom Pattern
Many components wrap Radix primitives with custom styling:
- Raw primitive from `@radix-ui/*`
- Custom styled wrapper in `components/ui/`
- Domain-specific component in `components/assistant-ui/`

### Context Providers
State managed through React Context:
- `SidebarProvider` - Sidebar state
- `MyRuntimeProvider` - Runtime state
- `TooltipProvider` - Tooltip configuration

### Compound Components
Related components exported together:
- Sidebar (Sidebar, SidebarHeader, SidebarContent, SidebarFooter, etc.)
- Dialog (Dialog, DialogContent, DialogHeader, DialogTitle, etc.)
- Breadcrumb (Breadcrumb, BreadcrumbItem, BreadcrumbLink, etc.)

---

## Styling Approach

- **Tailwind CSS** for utility-first styling
- **CSS Variables** for theming (--sidebar-width, --thread-max-width, etc.)
- **Dark mode** support via Tailwind's dark: variants
- **CVA (class-variance-authority)** for variant-based component styling
- **data-attributes** for state-based styling (data-state, data-active, etc.)

---

## Key Configuration

### Environment Variables
- `NEXT_PUBLIC_BACKEND_URL` - Backend API URL (default: http://localhost:8080)

### Session
- Session ID: "default-session" (hardcoded in AomiFrame)

### Polling
- Poll interval: 500ms (when processing)

### Sidebar
- Desktop width: 16rem
- Mobile width: 18rem
- Icon width: 3rem
- Keyboard shortcut: Cmd/Ctrl+B

### Thread
- Max width: 44rem (CSS variable)