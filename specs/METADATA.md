# Project Metadata

## Package

- Name: `@aomi-labs/react`
- Purpose: AI assistant widget for onchain apps (React component wrapping Assistant UI)

## Stack

- React 19 / Next.js 15 / TypeScript
- `@assistant-ui/react` for chat primitives
- Radix UI + Tailwind CSS 4 for styling
- `tsup` for library bundling

## Visual Layout Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            AomiFrame.Root                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ThreadListSidebar   â”‚  â”‚              SidebarInset                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ SidebarHeader  â”‚  â”‚  â”‚  â”‚           AomiFrame.Header             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â”‚    Logo    â”‚ â”‚  â”‚  â”‚  â”‚ â”‚ â˜°   â”‚ â”‚    ControlBar     â”‚ â”‚Titleâ”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚ Modelâ”‚Agentâ”‚ğŸ”‘â”‚ğŸ‘› â”‚ â””â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ [WalletConnect]â”‚  â”‚  â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  ThreadList    â”‚  â”‚  â”‚  â”‚          AomiFrame.Composer            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Thread 1 â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                                  â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  â”‚  â”‚  â”‚           Message List           â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Thread 2 â”‚  â”‚  â”‚  â”‚  â”‚  â”‚         (Thread component)       â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  â”‚  â”‚  â”‚                                  â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Thread 3 â”‚  â”‚  â”‚  â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚  â”‚    â”‚     User Message        â”‚   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ SidebarFooter  â”‚  â”‚  â”‚  â”‚  â”‚    â”‚   Assistant Message     â”‚   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ [WalletConnect]â”‚  â”‚  â”‚  â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚                                  â”‚  â”‚  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚                            â”‚  â”‚  â”‚  â”‚           Composer               â”‚  â”‚ â”‚
â”‚                            â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â” â”‚  â”‚ â”‚
â”‚                            â”‚  â”‚  â”‚  â”‚  â”‚  Type a message...     â”‚ â”‚â¤ â”‚ â”‚  â”‚ â”‚
â”‚                            â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”˜ â”‚  â”‚ â”‚
â”‚                            â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚                            â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚                            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ControlBar Components:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ ModelSelect â”‚  â”‚NamespaceSelectâ”‚  â”‚ ğŸ”‘ â”‚  â”‚  WalletConnect â”‚ {children} â”‚
â”‚  â”‚  (dropdown) â”‚  â”‚  (dropdown)   â”‚  â”‚    â”‚  â”‚   (button)     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                      ApiKey                                â”‚
â”‚                                      Input                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Hierarchy

```
AomiFrame (DefaultLayout)
â”œâ”€â”€ AomiFrame.Root
â”‚   â”œâ”€â”€ AomiRuntimeProvider (context)
â”‚   â”œâ”€â”€ SidebarProvider (context)
â”‚   â”œâ”€â”€ ThreadListSidebar
â”‚   â”‚   â”œâ”€â”€ SidebarHeader (Logo + optional WalletConnect)
â”‚   â”‚   â”œâ”€â”€ ThreadList
â”‚   â”‚   â””â”€â”€ SidebarFooter (optional WalletConnect)
â”‚   â””â”€â”€ SidebarInset
â”‚       â”œâ”€â”€ AomiFrame.Header
â”‚       â”‚   â”œâ”€â”€ SidebarTrigger (hamburger menu)
â”‚       â”‚   â”œâ”€â”€ ControlBar
â”‚       â”‚   â”‚   â”œâ”€â”€ ModelSelect
â”‚       â”‚   â”‚   â”œâ”€â”€ NamespaceSelect
â”‚       â”‚   â”‚   â”œâ”€â”€ ApiKeyInput
â”‚       â”‚   â”‚   â””â”€â”€ WalletConnect
â”‚       â”‚   â””â”€â”€ Breadcrumb (thread title)
â”‚       â””â”€â”€ AomiFrame.Composer
â”‚           â””â”€â”€ Thread (messages + composer input)
```

## Directory Structure

```
packages/react/src/
â”œâ”€â”€ index.ts                      # Public exports
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ client.ts                 # BackendApi HTTP client
â”‚   â””â”€â”€ types.ts                  # API response types
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ event-context.tsx         # Event system (SSE + system events)
â”‚   â”œâ”€â”€ user-context.tsx          # User/wallet state
â”‚   â”œâ”€â”€ thread-context.tsx        # Thread state management
â”‚   â”œâ”€â”€ notification-context.tsx  # Toast notifications
â”‚   â””â”€â”€ runtime-actions.ts        # Legacy runtime actions (deprecated)
â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ wallet-handler.ts         # useWalletHandler hook
â”‚   â””â”€â”€ notification-handler.ts   # useNotificationHandler hook
â”œâ”€â”€ runtime/
â”‚   â”œâ”€â”€ aomi-runtime.tsx          # Provider shell (contexts)
â”‚   â”œâ”€â”€ core.tsx                  # Runtime logic (uses hooks)
â”‚   â”œâ”€â”€ threadlist-adapter.ts     # Thread list adapter builder
â”‚   â”œâ”€â”€ orchestrator.ts           # Coordinates polling + messages
â”‚   â”œâ”€â”€ polling-controller.ts     # Polling state machine
â”‚   â”œâ”€â”€ message-controller.ts     # Message send/receive
â”‚   â””â”€â”€ utils.ts                  # Message conversion, wallet helpers
â”œâ”€â”€ state/
â”‚   â”œâ”€â”€ backend-state.ts          # Backend sync state
â”‚   â”œâ”€â”€ thread-store.ts           # Thread metadata store
â”‚   â””â”€â”€ event-buffer.ts           # Event queue

apps/registry/src/                # UI components (AomiFrame, Thread, etc.)
apps/landing/                     # Demo Next.js app
dist/                             # Build output
```

## Commands

```bash
pnpm install                 # Install deps
pnpm run build:lib           # Build â†’ dist/
pnpm --filter landing dev    # Demo at :3000
pnpm run dev:landing:live    # Watch lib + landing together
pnpm lint                    # Lint check
```

## Environment

```
NEXT_PUBLIC_BACKEND_URL   # API base (default: localhost:8080)
NEXT_PUBLIC_PROJECT_ID    # Reown Web3 project ID
```

## Ports

- 3000: Demo app (Next.js dev)
- 8080: Backend API (expected)

## Build Output

```
dist/
â”œâ”€â”€ index.js      # ESM
â”œâ”€â”€ index.cjs     # CommonJS
â”œâ”€â”€ index.d.ts    # Types
â””â”€â”€ styles.css    # Styles
```
