{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "aomi-frame",
  "type": "registry:component",
  "description": "Full assistant shell with thread list and runtime wiring.",
  "files": [
    {
      "type": "registry:component",
      "path": "components/aomi-frame.tsx",
      "content": "\"use client\";\n\nimport {\n  type CSSProperties,\n  type ReactNode,\n  type FC,\n  createContext,\n  useContext,\n} from \"react\";\nimport { AomiRuntimeProvider, cn, useAomiRuntime } from \"@aomi-labs/react\";\nimport { Thread } from \"@/components/assistant-ui/thread\";\nimport { ThreadListSidebar } from \"@/components/assistant-ui/threadlist-sidebar\";\nimport { NotificationToaster } from \"@/components/ui/notification\";\nimport {\n  SidebarInset,\n  SidebarProvider,\n  SidebarTrigger,\n} from \"@/components/ui/sidebar\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  BreadcrumbList,\n} from \"@/components/ui/breadcrumb\";\nimport { ControlBar, type ControlBarProps } from \"@/components/control-bar\";\n\n// =============================================================================\n// Composer Control Context - signals Thread to show inline controls\n// =============================================================================\n\nconst ComposerControlContext = createContext<boolean>(false);\n\nexport const useComposerControl = () => useContext(ComposerControlContext);\n\n// =============================================================================\n// Types\n// =============================================================================\n\ntype RootProps = {\n  children?: ReactNode;\n  width?: CSSProperties[\"width\"];\n  height?: CSSProperties[\"height\"];\n  className?: string;\n  style?: CSSProperties;\n  /** Position of the wallet button in the sidebar */\n  walletPosition?: \"header\" | \"footer\" | null;\n  /** Backend URL for the Aomi runtime */\n  backendUrl?: string;\n};\n\ntype HeaderProps = {\n  children?: ReactNode;\n  /** Show the control bar in the header */\n  withControl?: boolean;\n  /** Props to pass to the ControlBar when withControl is true */\n  controlBarProps?: Omit<ControlBarProps, \"children\">;\n  className?: string;\n};\n\ntype ComposerProps = {\n  children?: ReactNode;\n  /** Show inline controls in the composer input area */\n  withControl?: boolean;\n  className?: string;\n};\n\ntype FrameControlBarProps = ControlBarProps;\n\n// =============================================================================\n// Compound Components\n// =============================================================================\n\n/**\n * Root component - provides all context and layout container\n */\nconst Root: FC<RootProps> = ({\n  children,\n  width = \"100%\",\n  height = \"80vh\",\n  className,\n  style,\n  walletPosition = \"footer\",\n  backendUrl,\n}) => {\n  const resolvedBackendUrl =\n    backendUrl ??\n    process.env.NEXT_PUBLIC_BACKEND_URL ??\n    \"http://localhost:8080\";\n  const frameStyle: CSSProperties = { width, height, ...style };\n\n  return (\n    <AomiRuntimeProvider backendUrl={resolvedBackendUrl}>\n      <SidebarProvider>\n        <div\n          className={cn(\n            \"rounded-4xl flex h-full w-full overflow-hidden bg-white shadow-2xl dark:bg-neutral-950\",\n            className,\n          )}\n          style={frameStyle}\n        >\n          <ThreadListSidebar walletPosition={walletPosition} />\n          <SidebarInset className=\"relative flex flex-col\">\n            {children}\n          </SidebarInset>\n          <NotificationToaster />\n        </div>\n      </SidebarProvider>\n    </AomiRuntimeProvider>\n  );\n};\n\n/**\n * Header component - renders the header with optional control bar\n */\nconst Header: FC<HeaderProps> = ({\n  children,\n  withControl,\n  controlBarProps,\n  className,\n}) => {\n  const { currentThreadId, getThreadMetadata } = useAomiRuntime();\n  const currentTitle = getThreadMetadata(currentThreadId)?.title ?? \"New Chat\";\n\n  return (\n    <header\n      className={cn(\n        \"mt-1 flex h-14 shrink-0 items-center gap-2 px-3\",\n        className,\n      )}\n    >\n      <SidebarTrigger />\n      <Separator orientation=\"vertical\" className=\"mr-2 h-4\" />\n      <Breadcrumb>\n        <BreadcrumbList>\n          <BreadcrumbItem className=\"hidden md:block\">\n            {currentTitle}\n          </BreadcrumbItem>\n        </BreadcrumbList>\n      </Breadcrumb>\n      <div className=\"ml-auto flex items-center gap-2\">\n        {withControl && <ControlBar {...controlBarProps} />}\n        {children}\n      </div>\n    </header>\n  );\n};\n\n/**\n * Composer component - renders the thread with optional inline controls\n * When withControl={true}, controls appear inline in the composer input area\n */\nconst Composer: FC<ComposerProps> = ({\n  children,\n  withControl = false,\n  className,\n}) => {\n  const { currentThreadId, threadViewKey } = useAomiRuntime();\n\n  return (\n    <ComposerControlContext.Provider value={withControl}>\n      <div className={cn(\"flex flex-1 flex-col overflow-hidden\", className)}>\n        <Thread key={`${currentThreadId}-${threadViewKey}`} />\n        {children}\n      </div>\n    </ComposerControlContext.Provider>\n  );\n};\n\n/**\n * ControlBar component - wrapper for the control bar with frame styling\n */\nconst FrameControlBar: FC<FrameControlBarProps> = (props) => {\n  return <ControlBar {...props} />;\n};\n\n// =============================================================================\n// Default Layout Component (Simple API)\n// =============================================================================\n\ntype DefaultLayoutProps = Omit<RootProps, \"children\">;\n\n/**\n * Default layout - controls are inline in the composer input area\n * Usage: <AomiFrame /> or <AomiFrame walletPosition=\"header\" />\n */\nconst DefaultLayout: FC<DefaultLayoutProps> = ({\n  walletPosition = \"footer\",\n  ...props\n}) => {\n  // Hide wallet in ControlBar when it's shown in sidebar\n  const hideWalletInControlBar = walletPosition !== null;\n\n  return (\n    <Root walletPosition={walletPosition} {...props}>\n      <Header\n        withControl\n        controlBarProps={{ hideWallet: hideWalletInControlBar }}\n      />\n      <Composer />\n    </Root>\n  );\n};\n\n// =============================================================================\n// Export Compound Component\n// =============================================================================\n\nexport const AomiFrame = Object.assign(DefaultLayout, {\n  Root,\n  Header,\n  Composer,\n  ControlBar: FrameControlBar,\n});\n\n// Re-export types for consumers\nexport type {\n  RootProps as AomiFrameRootProps,\n  HeaderProps as AomiFrameHeaderProps,\n  ComposerProps as AomiFrameComposerProps,\n  FrameControlBarProps as AomiFrameControlBarProps,\n};\n"
    }
  ],
  "dependencies": ["@aomi-labs/react"],
  "registryDependencies": [
    "https://aomi.dev/r/assistant-thread.json",
    "https://aomi.dev/r/assistant-threadlist-sidebar.json",
    "https://aomi.dev/r/notification.json",
    "separator",
    "breadcrumb",
    "sidebar"
  ]
}
